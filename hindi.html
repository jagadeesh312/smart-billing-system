<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§¨‡§ø‡§≤‡§ø‡§Ç‡§ó AI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

/* BACKGROUND */
body {
  font-family: Arial, sans-serif;
  min-height: 100vh;
  background:
    linear-gradient(rgba(0,0,0,0.45), rgba(0,0,0,0.45)),
    url("https://images.unsplash.com/photo-1557683316-973673baf926?w=1920&q=80");
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
  display: flex;
  justify-content: center;
  align-items: center;
  color: #fff;
}

/* TOP BAR */
.btn-row {
  position: fixed;
  top: 12px;
  left: 12px;
  right: 12px;
  display: flex;
  gap: 10px;
  padding: 10px;
  background: rgba(255,255,255,0.15);
  backdrop-filter: blur(16px);
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.25);
  z-index: 1000;
}

.btn-row button {
  flex: 1;
  padding: 12px;
  font-size: 14px;
  color: white;
  cursor: pointer;
  background: rgba(255,255,255,0.18);
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 10px;
}

.btn-row button:first-child {
  background: rgba(71,85,105,0.45);
}

/* MAIN APP */
.app {
  width: 360px;
  padding: 20px;
  margin-top: 90px;
  background: rgba(255,255,255,0.12);
  backdrop-filter: blur(20px);
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,0.25);
  box-shadow: 0 25px 50px rgba(0,0,0,0.6);
}

h1 {
  text-align: center;
  font-size: 20px;
  margin-bottom: 6px;
}

.status {
  text-align: center;
  font-size: 14px;
  color: #7dd3fc;
  margin-bottom: 10px;
}

/* LOG & BILL */
.log, .bill {
  margin-top: 12px;
  padding: 12px;
  height: 120px;
  overflow-y: auto;
  background: rgba(255,255,255,0.1);
  backdrop-filter: blur(14px);
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.25);
  font-size: 14px;
}
</style>
</head>

<body>

<!-- TOP CONTROLS -->
<div class="btn-row">
  <button onclick="goBack()">‚¨Ö ‡§µ‡§æ‡§™‡§∏</button>
  <button onclick="startListening()">üé§ ‡§¨‡•ã‡§≤‡§ø‡§è</button>
</div>

<!-- MAIN APP -->
<div class="app">
  <h1>üßæ ‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§¨‡§ø‡§≤‡§ø‡§Ç‡§ó AI</h1>
  <div class="status" id="status">‡§¨‡•ã‡§≤‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¶‡§¨‡§æ‡§è‡§Å</div>
  <div class="log" id="log"></div>
  <div class="bill" id="bill"></div>
</div>

<script>
/* =====================
   DATA
===================== */
const products = {
  "‡§¶‡•Ç‡§ß": 60,
  "‡§ö‡§æ‡§µ‡§≤": 55,
  "‡§ö‡•Ä‡§®‡•Ä": 45,
  "‡§¨‡•ç‡§∞‡•á‡§°": 40
};

const numberWords = {
  "‡§è‡§ï":1, "‡§¶‡•ã":2, "‡§§‡•Ä‡§®":3, "‡§ö‡§æ‡§∞":4, "‡§™‡§æ‡§Ç‡§ö":5,
  "‡§õ‡§π":6, "‡§∏‡§æ‡§§":7, "‡§Ü‡§†":8, "‡§®‡•å":9, "‡§¶‡§∏":10
};

let bill = {};

/* =====================
   SPEECH SETUP
===================== */
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
const recognition = new SpeechRecognition();
recognition.lang = "hi-IN";
recognition.interimResults = false;

function startListening() {
  status("‡§∏‡•Å‡§® ‡§∞‡§π‡§æ ‡§π‡•à...");
  recognition.start();
}

recognition.onresult = (e) => {
  const text = e.results[0][0].transcript;
  log("üë§ " + text);
  handleCommand(text);
};

recognition.onend = () => status("‡§¨‡•ã‡§≤‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¶‡§¨‡§æ‡§è‡§Å");

/* =====================
   COMMAND HANDLER
===================== */
function handleCommand(text) {

  if (text.includes("‡§§‡•Å‡§Æ ‡§ï‡•å‡§® ‡§π‡•ã")) {
    speak("‡§Æ‡•à‡§Ç ‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§¨‡§ø‡§≤‡§ø‡§Ç‡§ó ‡§è‡§Ü‡§à ‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§π‡•Ç‡§Å‡•§");
    return;
  }

  if (text.includes("‡§§‡•Å‡§Æ‡•ç‡§π‡•á‡§Ç ‡§ï‡§ø‡§∏‡§®‡•á ‡§¨‡§®‡§æ‡§Ø‡§æ")) {
    speak("‡§Æ‡•Å‡§ù‡•á ‡§è‡§∏ ‡§¨‡•Ä ‡§è ‡§è‡§∏ ‡§ü‡•Ä‡§Æ ‡§î‡§∞ ‡§ú‡§ó‡§¶‡•Ä‡§∂ ‡§®‡•á ‡§¨‡§®‡§æ‡§Ø‡§æ ‡§π‡•à‡•§");
    return;
  }

  if (text.includes("‡§§‡§æ‡§∞‡•Ä‡§ñ")) {
    const today = new Date().toLocaleDateString("hi-IN", {
      day: "numeric", month: "long", year: "numeric"
    });
    speak("‡§Ü‡§ú ‡§ï‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ " + today);
    return;
  }

  if (text.includes("‡§ï‡•ç‡§≤‡§ø‡§Ø‡§∞") || text.includes("‡§∏‡§¨ ‡§π‡§ü‡§æ‡§ì")) {
    bill = {};
    updateBill();
    speak("‡§¨‡§ø‡§≤ ‡§∏‡§æ‡§´ ‡§ï‡§∞ ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§");
    return;
  }

  if (text.includes("‡§¶‡§æ‡§Æ") || text.includes("‡§ï‡•Ä‡§Æ‡§§")) {
    for (let item in products) {
      if (text.includes(item)) {
        speak(item + " ‡§ï‡§æ ‡§¶‡§æ‡§Æ " + products[item] + " ‡§∞‡•Å‡§™‡§Ø‡•á ‡§π‡•à");
        return;
      }
    }
  }

  if (text.includes("‡§ï‡•Å‡§≤")) {
    let total = 0;
    for (let item in bill) total += bill[item] * products[item];
    speak("‡§ï‡•Å‡§≤ ‡§∞‡§æ‡§∂‡§ø " + total + " ‡§∞‡•Å‡§™‡§Ø‡•á ‡§π‡•à");
    return;
  }

  if (text.includes("‡§¶‡•ã‡§π‡§∞‡§æ‡§ì")) {
    if (Object.keys(bill).length === 0) {
      speak("‡§¨‡§ø‡§≤ ‡§ñ‡§æ‡§≤‡•Ä ‡§π‡•à‡•§");
      return;
    }
    let summary = [];
    for (let item in bill) summary.push(bill[item] + " " + item);
    speak("‡§Ü‡§™‡§ï‡•á ‡§¨‡§ø‡§≤ ‡§Æ‡•á‡§Ç " + summary.join(", "));
    return;
  }

  if (text.includes("‡§π‡§ü‡§æ‡§ì")) {
    let qty = 1;
    for (let n in numberWords) if (text.includes(n)) qty = numberWords[n];

    for (let item in bill) {
      if (text.includes(item)) {
        bill[item] -= qty;
        if (bill[item] <= 0) delete bill[item];
        updateBill();
        speak(qty + " " + item + " ‡§π‡§ü‡§æ ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ");
        return;
      }
    }
  }

  const parts = text.split(" ‡§î‡§∞ ");
  let added = [];

  parts.forEach(part => {
    let qty = 1;
    for (let n in numberWords) if (part.includes(n)) qty = numberWords[n];

    for (let item in products) {
      if (part.includes(item)) {
        bill[item] = (bill[item] || 0) + qty;
        added.push(qty + " " + item);
      }
    }
  });

  if (added.length) {
    updateBill();
    speak(added.join(" ‡§î‡§∞ ") + " ‡§ú‡•ã‡§°‡§º‡§æ ‡§ó‡§Ø‡§æ");
    return;
  }

  speak("‡§Æ‡§æ‡§´‡§º ‡§ï‡•Ä‡§ú‡§ø‡§è, ‡§Æ‡•Å‡§ù‡•á ‡§∏‡§Æ‡§ù ‡§®‡§π‡•Ä‡§Ç ‡§Ü‡§Ø‡§æ‡•§");
}

/* =====================
   BILL UI
===================== */
function updateBill() {
  let html = "<b>‡§¨‡§ø‡§≤</b><br>";
  let total = 0;

  for (let item in bill) {
    const cost = bill[item] * products[item];
    total += cost;
    html += `${item} x ${bill[item]} = ‚Çπ${cost}<br>`;
  }

  html += `<b>‡§ï‡•Å‡§≤: ‚Çπ${total}</b>`;
  document.getElementById("bill").innerHTML = html;
}

/* =====================
   HELPERS
===================== */
function speak(text) {
  log("ü§ñ " + text);
  const u = new SpeechSynthesisUtterance(text);
  u.lang = "hi-IN";
  speechSynthesis.speak(u);
}

function log(t) {
  const d = document.getElementById("log");
  d.innerHTML += t + "<br>";
  d.scrollTop = d.scrollHeight;
}

function status(t) {
  document.getElementById("status").innerText = t;
}

function goBack() {
  history.back();
}
</script>

</body>
</html>
