<!DOCTYPE html>
<html lang="ml">
<head>
<meta charset="UTF-8">
<title>‡¥∏‡µç‡¥Æ‡¥æ‡µº‡¥ü‡µç‡¥ü‡µç ‡¥¨‡¥ø‡¥≤‡µç‡¥≤‡¥ø‡¥Ç‡¥ó‡µç AI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

/* BACKGROUND */
body {
  font-family: Arial, sans-serif;
  min-height: 100vh;
  background:
    linear-gradient(rgba(0,0,0,0.45), rgba(0,0,0,0.45)),
    url("https://images.unsplash.com/photo-1557683316-973673baf926?w=1920&q=80");
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
  display: flex;
  justify-content: center;
  align-items: center;
  color: #fff;
}

/* TOP BAR */
.btn-row {
  position: fixed;
  top: 12px;
  left: 12px;
  right: 12px;
  display: flex;
  gap: 10px;
  padding: 10px;
  background: rgba(255,255,255,0.15);
  backdrop-filter: blur(16px);
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.25);
  z-index: 1000;
}

.btn-row button {
  flex: 1;
  padding: 12px;
  font-size: 14px;
  color: white;
  cursor: pointer;
  background: rgba(255,255,255,0.18);
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 10px;
}

.btn-row button:first-child {
  background: rgba(71,85,105,0.45);
}

/* MAIN APP */
.app {
  width: 360px;
  padding: 20px;
  margin-top: 90px;
  background: rgba(255,255,255,0.12);
  backdrop-filter: blur(20px);
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,0.25);
  box-shadow: 0 25px 50px rgba(0,0,0,0.6);
}

h1 {
  text-align: center;
  font-size: 20px;
  margin-bottom: 6px;
}

.status {
  text-align: center;
  font-size: 14px;
  color: #7dd3fc;
  margin-bottom: 10px;
}

/* LOG & BILL */
.log, .bill {
  margin-top: 12px;
  padding: 12px;
  height: 120px;
  overflow-y: auto;
  background: rgba(255,255,255,0.1);
  backdrop-filter: blur(14px);
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.25);
  font-size: 14px;
}
</style>
</head>

<body>

<!-- TOP CONTROLS -->
<div class="btn-row">
  <button onclick="goBack()">‚¨Ö ‡¥™‡¥ø‡µª‡¥µ‡¥æ‡¥ô‡µç‡¥ô‡µÅ‡¥ï</button>
  <button onclick="startListening()">üé§ ‡¥∏‡¥Ç‡¥∏‡¥æ‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï</button>
</div>

<!-- MAIN APP -->
<div class="app">
  <h1>üßæ ‡¥∏‡µç‡¥Æ‡¥æ‡µº‡¥ü‡µç‡¥ü‡µç ‡¥¨‡¥ø‡¥≤‡µç‡¥≤‡¥ø‡¥Ç‡¥ó‡µç AI</h1>
  <div class="status" id="status">‡¥∏‡¥Ç‡¥∏‡¥æ‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡µª ‡¥Ö‡¥Æ‡µº‡¥§‡µç‡¥§‡µÅ‡¥ï</div>
  <div class="log" id="log"></div>
  <div class="bill" id="bill"></div>
</div>

<script>
/* =====================
   DATA
===================== */
const products = {
  "‡¥™‡¥æ‡µΩ": 60,
  "‡¥Ö‡¥∞‡¥ø": 55,
  "‡¥™‡¥û‡µç‡¥ö‡¥∏‡¥æ‡¥∞": 45,
  "‡¥¨‡µç‡¥∞‡µÜ‡¥°‡µç": 40
};

const numberWords = {
  "‡¥í‡¥∞‡µÅ":1, "‡¥∞‡¥£‡µç‡¥ü‡µç":2, "‡¥Æ‡µÇ‡¥®‡µç‡¥®‡µç":3, "‡¥®‡¥æ‡¥≤‡µç":4, "‡¥Ö‡¥û‡µç‡¥ö‡µç":5,
  "‡¥Ü‡¥±‡µç":6, "‡¥è‡¥¥‡µç":7, "‡¥é‡¥ü‡µç‡¥ü‡µç":8, "‡¥í‡¥Æ‡µç‡¥™‡¥§‡µç":9, "‡¥™‡¥§‡µç‡¥§‡µç":10
};

let bill = {};

/* =====================
   SPEECH SETUP
===================== */
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
const recognition = new SpeechRecognition();
recognition.lang = "ml-IN";
recognition.interimResults = false;

function startListening() {
  status("‡¥ï‡µá‡µæ‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ...");
  recognition.start();
}

recognition.onresult = (e) => {
  const text = e.results[0][0].transcript;
  log("üë§ " + text);
  handleCommand(text);
};

recognition.onend = () => status("‡¥∏‡¥Ç‡¥∏‡¥æ‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡µª ‡¥Ö‡¥Æ‡µº‡¥§‡µç‡¥§‡µÅ‡¥ï");

/* =====================
   COMMAND HANDLER
===================== */
function handleCommand(text) {

  if (text.includes("‡¥®‡µÄ ‡¥Ü‡¥∞‡¥æ‡¥£‡µç")) {
    speak("‡¥û‡¥æ‡µª ‡¥∏‡µç‡¥Æ‡¥æ‡µº‡¥ü‡µç‡¥ü‡µç ‡¥¨‡¥ø‡¥≤‡µç‡¥≤‡¥ø‡¥Ç‡¥ó‡µç ‡¥é ‡¥ê ‡¥∏‡¥Ç‡¥µ‡¥ø‡¥ß‡¥æ‡¥®‡¥Ç ‡¥Ü‡¥£‡µç.");
    return;
  }

  if (text.includes("‡¥®‡¥ø‡¥®‡µç‡¥®‡µÜ ‡¥Ü‡¥∞‡¥æ‡¥£‡µç ‡¥∏‡µÉ‡¥∑‡µç‡¥ü‡¥ø‡¥ö‡µç‡¥ö‡¥§‡µç")) {
    speak("‡¥é‡¥®‡µç‡¥®‡µÜ ‡¥é‡¥∏‡µç ‡¥¨‡¥ø ‡¥é ‡¥é‡¥∏‡µç ‡¥ü‡µÄ‡¥µ‡µÅ‡¥Ç ‡¥ú‡¥ó‡¥¶‡µÄ‡¥∑‡µÅ‡¥Ç ‡¥∏‡µÉ‡¥∑‡µç‡¥ü‡¥ø‡¥ö‡µç‡¥ö‡µÅ.");
    return;
  }

  if (text.includes("‡¥§‡µÄ‡¥Ø‡¥§‡¥ø")) {
    const today = new Date().toLocaleDateString("ml-IN", {
      day: "numeric", month: "long", year: "numeric"
    });
    speak("‡¥á‡¥®‡µç‡¥®‡¥§‡µç‡¥§‡µÜ ‡¥§‡µÄ‡¥Ø‡¥§‡¥ø " + today);
    return;
  }

  if (text.includes("‡¥ï‡µç‡¥≤‡¥ø‡¥Ø‡µº") || text.includes("‡¥é‡¥≤‡µç‡¥≤‡¥æ‡¥Ç ‡¥®‡µÄ‡¥ï‡µç‡¥ï‡¥Ç")) {
    bill = {};
    updateBill();
    speak("‡¥¨‡¥ø‡µΩ ‡¥ï‡µç‡¥≤‡¥ø‡¥Ø‡µº ‡¥ö‡µÜ‡¥Ø‡µç‡¥§‡µÅ.");
    return;
  }

  if (text.includes("‡¥µ‡¥ø‡¥≤")) {
    for (let item in products) {
      if (text.includes(item)) {
        speak(item + " ‡¥µ‡¥ø‡¥≤ ‡¥∞‡µÇ‡¥™ " + products[item]);
        return;
      }
    }
  }

  if (text.includes("‡¥Ü‡¥ï‡µÜ")) {
    let total = 0;
    for (let item in bill) total += bill[item] * products[item];
    speak("‡¥Ü‡¥ï‡µÜ ‡¥§‡µÅ‡¥ï ‡¥∞‡µÇ‡¥™ " + total);
    return;
  }

  if (text.includes("‡¥µ‡µÄ‡¥£‡µç‡¥ü‡µÅ‡¥Ç")) {
    if (Object.keys(bill).length === 0) {
      speak("‡¥¨‡¥ø‡µΩ ‡¥ï‡¥æ‡¥≤‡¥ø‡¥Ø‡¥æ‡¥£‡µÅ.");
      return;
    }
    let summary = [];
    for (let item in bill) summary.push(bill[item] + " " + item);
    speak("‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥¨‡¥ø‡¥≤‡¥ø‡µΩ " + summary.join(", "));
    return;
  }

  if (text.includes("‡¥®‡µÄ‡¥ï‡µç‡¥ï‡¥Ç")) {
    let qty = 1;
    for (let n in numberWords) if (text.includes(n)) qty = numberWords[n];

    for (let item in bill) {
      if (text.includes(item)) {
        bill[item] -= qty;
        if (bill[item] <= 0) delete bill[item];
        updateBill();
        speak(qty + " " + item + " ‡¥®‡µÄ‡¥ï‡µç‡¥ï‡¥Ç ‡¥ö‡µÜ‡¥Ø‡µç‡¥§‡µÅ.");
        return;
      }
    }
  }

  const parts = text.split("‡¥Ø‡µÅ‡¥Ç");
  let added = [];

  parts.forEach(part => {
    let qty = 1;
    for (let n in numberWords) if (part.includes(n)) qty = numberWords[n];

    for (let item in products) {
      if (part.includes(item)) {
        bill[item] = (bill[item] || 0) + qty;
        added.push(qty + " " + item);
      }
    }
  });

  if (added.length) {
    updateBill();
    speak(added.join("‡¥Ø‡µÅ‡¥Ç") + " ‡¥ö‡µá‡µº‡¥§‡µç‡¥§‡µÅ.");
    return;
  }

  speak("‡¥ï‡µç‡¥∑‡¥Æ‡¥ø‡¥ï‡µç‡¥ï‡¥£‡¥Ç, ‡¥é‡¥®‡¥ø‡¥ï‡µç‡¥ï‡µç ‡¥Æ‡¥®‡¥∏‡µç‡¥∏‡¥ø‡¥≤‡¥æ‡¥Ø‡¥ø‡¥≤‡µç‡¥≤.");
}

/* =====================
   BILL UI
===================== */
function updateBill() {
  let html = "<b>‡¥¨‡¥ø‡µΩ</b><br>";
  let total = 0;

  for (let item in bill) {
    const cost = bill[item] * products[item];
    total += cost;
    html += `${item} x ${bill[item]} = ‚Çπ${cost}<br>`;
  }

  html += `<b>‡¥Ü‡¥ï‡µÜ: ‚Çπ${total}</b>`;
  document.getElementById("bill").innerHTML = html;
}

/* =====================
   HELPERS
===================== */
function speak(text) {
  log("ü§ñ " + text);
  const u = new SpeechSynthesisUtterance(text);
  u.lang = "ml-IN";
  speechSynthesis.speak(u);
}

function log(t) {
  const d = document.getElementById("log");
  d.innerHTML += t + "<br>";
  d.scrollTop = d.scrollHeight;
}

function status(t) {
  document.getElementById("status").innerText = t;
}

function goBack() {
  history.back();
}
</script>

</body>
</html>
