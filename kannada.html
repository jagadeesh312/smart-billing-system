<!DOCTYPE html>
<html lang="kn">
<head>
<meta charset="UTF-8">
<title>‡≤∏‡≥ç‡≤Æ‡≤æ‡≤∞‡≥ç‡≤ü‡≥ç ‡≤¨‡≤ø‡≤≤‡≥ç‡≤≤‡≤ø‡≤Ç‡≤ó‡≥ç AI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

/* BACKGROUND */
body {
  font-family: Arial, sans-serif;
  min-height: 100vh;
  background:
    linear-gradient(rgba(0,0,0,0.45), rgba(0,0,0,0.45)),
    url("https://images.unsplash.com/photo-1557683316-973673baf926?w=1920&q=80");
  background-size: cover;
  background-position: center;
  background-attachment: fixed;

  display: flex;
  justify-content: center;
  align-items: center;
  color: #fff;
}

/* TOP BAR */
.btn-row {
  position: fixed;
  top: 12px;
  left: 12px;
  right: 12px;
  display: flex;
  gap: 10px;
  padding: 10px;
  background: rgba(255,255,255,0.15);
  backdrop-filter: blur(16px);
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.25);
  z-index: 1000;
}

.btn-row button {
  flex: 1;
  padding: 12px;
  font-size: 14px;
  color: white;
  cursor: pointer;
  background: rgba(255,255,255,0.18);
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 10px;
}

.btn-row button:first-child {
  background: rgba(71,85,105,0.45);
}

/* MAIN APP */
.app {
  width: 360px;
  padding: 20px;
  margin-top: 90px;
  background: rgba(255,255,255,0.12);
  backdrop-filter: blur(20px);
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,0.25);
  box-shadow: 0 25px 50px rgba(0,0,0,0.6);
}

h1 {
  text-align: center;
  font-size: 20px;
  margin-bottom: 6px;
}

.status {
  text-align: center;
  font-size: 14px;
  color: #7dd3fc;
  margin-bottom: 10px;
}

/* LOG & BILL */
.log, .bill {
  margin-top: 12px;
  padding: 12px;
  height: 120px;
  overflow-y: auto;
  background: rgba(255,255,255,0.1);
  backdrop-filter: blur(14px);
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.25);
  font-size: 14px;
}
</style>
</head>

<body>

<!-- TOP CONTROLS -->
<div class="btn-row">
  <button onclick="goBack()">‚¨Ö ‡≤π‡≤ø‡≤Ç‡≤¶‡≤ø‡≤∞‡≥Å‡≤ó‡≥Å</button>
  <button onclick="startListening()">üé§ ‡≤Æ‡≤æ‡≤§‡≤æ‡≤°‡≤ø</button>
</div>

<!-- MAIN APP -->
<div class="app">
  <h1>üßæ ‡≤∏‡≥ç‡≤Æ‡≤æ‡≤∞‡≥ç‡≤ü‡≥ç ‡≤¨‡≤ø‡≤≤‡≥ç‡≤≤‡≤ø‡≤Ç‡≤ó‡≥ç AI</h1>
  <div class="status" id="status">‡≤Æ‡≤æ‡≤§‡≤æ‡≤°‡≤≤‡≥Å ‡≤í‡≤§‡≥ç‡≤§‡≤ø‡≤∞‡≤ø</div>
  <div class="log" id="log"></div>
  <div class="bill" id="bill"></div>
</div>

<script>
/* =====================
   DATA
===================== */
const products = {
  "‡≤π‡≤æ‡≤≤‡≥Å": 60,
  "‡≤Ö‡≤ï‡≥ç‡≤ï‡≤ø": 55,
  "‡≤∏‡≤ï‡≥ç‡≤ï‡≤∞‡≥Ü": 45,
  "‡≤∞‡≥ä‡≤ü‡≥ç‡≤ü‡≤ø": 40
};

const numberWords = {
  "‡≤í‡≤Ç‡≤¶‡≥Å":1, "‡≤é‡≤∞‡≤°‡≥Å":2, "‡≤Æ‡≥Ç‡≤∞‡≥Å":3, "‡≤®‡≤æ‡≤≤‡≥ç‡≤ï‡≥Å":4, "‡≤ê‡≤¶‡≥Å":5,
  "‡≤Ü‡≤∞‡≥Å":6, "‡≤è‡≤≥‡≥Å":7, "‡≤é‡≤Ç‡≤ü‡≥Å":8, "‡≤í‡≤Ç‡≤¨‡≤§‡≥ç‡≤§‡≥Å":9, "‡≤π‡≤§‡≥ç‡≤§‡≥Å":10
};

let bill = {};

/* =====================
   SPEECH SETUP
===================== */
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
const recognition = new SpeechRecognition();
recognition.lang = "kn-IN";
recognition.interimResults = false;

function startListening() {
  status("‡≤ï‡≥Ü‡≤≥‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥Ü...");
  recognition.start();
}

recognition.onresult = (e) => {
  const text = e.results[0][0].transcript;
  log("üë§ " + text);
  handleCommand(text);
};

recognition.onend = () => status("‡≤Æ‡≤æ‡≤§‡≤æ‡≤°‡≤≤‡≥Å ‡≤í‡≤§‡≥ç‡≤§‡≤ø‡≤∞‡≤ø");

/* =====================
   COMMAND HANDLER
===================== */
function handleCommand(text) {

  if (text.includes("‡≤®‡≥Ä‡≤®‡≥Å ‡≤Ø‡≤æ‡≤∞‡≥Å")) {
    speak("‡≤®‡≤æ‡≤®‡≥Å ‡≤∏‡≥ç‡≤Æ‡≤æ‡≤∞‡≥ç‡≤ü‡≥ç ‡≤¨‡≤ø‡≤≤‡≥ç‡≤≤‡≤ø‡≤Ç‡≤ó‡≥ç ‡≤é‡≤ê ‡≤µ‡≥ç‡≤Ø‡≤µ‡≤∏‡≥ç‡≤•‡≥Ü.");
    return;
  }

  if (text.includes("‡≤®‡≤ø‡≤®‡≥ç‡≤®‡≤®‡≥ç‡≤®‡≥Å ‡≤Ø‡≤æ‡≤∞‡≥Å ‡≤®‡≤ø‡≤∞‡≥ç‡≤Æ‡≤ø‡≤∏‡≤ø‡≤¶‡≤∞‡≥Å")) {
    speak("‡≤®‡≤®‡≥ç‡≤®‡≤®‡≥ç‡≤®‡≥Å ‡≤é‡≤∏‡≥ç ‡≤¨‡≤ø ‡≤é ‡≤é‡≤∏‡≥ç ‡≤§‡≤Ç‡≤° ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤ú‡≤ó‡≤¶‡≥Ä‡≤∂‡≥ç ‡≤®‡≤ø‡≤∞‡≥ç‡≤Æ‡≤ø‡≤∏‡≤ø‡≤¶‡≥ç‡≤¶‡≤æ‡≤∞‡≥Ü.");
    return;
  }

  if (text.includes("‡≤¶‡≤ø‡≤®‡≤æ‡≤Ç‡≤ï")) {
    const today = new Date().toLocaleDateString("kn-IN", {
      day: "numeric", month: "long", year: "numeric"
    });
    speak("‡≤á‡≤Ç‡≤¶‡≤ø‡≤® ‡≤¶‡≤ø‡≤®‡≤æ‡≤Ç‡≤ï " + today);
    return;
  }

  if (text.includes("‡≤ï‡≥ç‡≤≤‡≤ø‡≤Ø‡≤∞‡≥ç") || text.includes("‡≤é‡≤≤‡≥ç‡≤≤‡≤µ‡≤®‡≥ç‡≤®‡≥Ç ‡≤§‡≥Ü‡≤ó‡≥Ü")) {
    bill = {};
    updateBill();
    speak("‡≤¨‡≤ø‡≤≤‡≥ç ‡≤ï‡≥ç‡≤≤‡≤ø‡≤Ø‡≤∞‡≥ç ‡≤Æ‡≤æ‡≤°‡≤≤‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü.");
    return;
  }

  if (text.includes("‡≤¨‡≥Ü‡≤≤‡≥Ü")) {
    for (let item in products) {
      if (text.includes(item)) {
        speak(item + " ‡≤¨‡≥Ü‡≤≤‡≥Ü ‡≤∞‡≥Ç " + products[item]);
        return;
      }
    }
  }

  if (text.includes("‡≤í‡≤ü‡≥ç‡≤ü‡≥Å")) {
    let total = 0;
    for (let item in bill) total += bill[item] * products[item];
    speak("‡≤í‡≤ü‡≥ç‡≤ü‡≥Å ‡≤Æ‡≥ä‡≤§‡≥ç‡≤§ ‡≤∞‡≥Ç " + total);
    return;
  }

  if (text.includes("‡≤Æ‡≤∞‡≥Å‡≤ï‡≤≥‡≤ø")) {
    if (Object.keys(bill).length === 0) {
      speak("‡≤¨‡≤ø‡≤≤‡≥ç ‡≤ñ‡≤æ‡≤≤‡≤ø‡≤Ø‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü.");
      return;
    }
    let summary = [];
    for (let item in bill) summary.push(bill[item] + " " + item);
    speak("‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤¨‡≤ø‡≤≤‡≥ç‡≤≤‡≤ø‡≤®‡≤≤‡≥ç‡≤≤‡≤ø " + summary.join(", "));
    return;
  }

  if (text.includes("‡≤§‡≥Ü‡≤ó‡≥Ü")) {
    let qty = 1;
    for (let n in numberWords) if (text.includes(n)) qty = numberWords[n];

    for (let item in bill) {
      if (text.includes(item)) {
        bill[item] -= qty;
        if (bill[item] <= 0) delete bill[item];
        updateBill();
        speak(qty + " " + item + " ‡≤§‡≥Ü‡≤ó‡≥Ü‡≤¶‡≥Å‡≤π‡≤æ‡≤ï‡≤≤‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü.");
        return;
      }
    }
  }

  const parts = text.split(" ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ");
  let added = [];

  parts.forEach(part => {
    let qty = 1;
    for (let n in numberWords) if (part.includes(n)) qty = numberWords[n];

    for (let item in products) {
      if (part.includes(item)) {
        bill[item] = (bill[item] || 0) + qty;
        added.push(qty + " " + item);
      }
    }
  });

  if (added.length) {
    updateBill();
    speak(added.join(" ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ") + " ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤≤‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü.");
    return;
  }

  speak("‡≤ï‡≥ç‡≤∑‡≤Æ‡≤ø‡≤∏‡≤ø, ‡≤®‡≤®‡≤ó‡≥Ü ‡≤Ö‡≤∞‡≥ç‡≤•‡≤µ‡≤æ‡≤ó‡≤≤‡≤ø‡≤≤‡≥ç‡≤≤.");
}

/* =====================
   BILL UI
===================== */
function updateBill() {
  let html = "<b>‡≤¨‡≤ø‡≤≤‡≥ç</b><br>";
  let total = 0;

  for (let item in bill) {
    const cost = bill[item] * products[item];
    total += cost;
    html += `${item} x ${bill[item]} = ‚Çπ${cost}<br>`;
  }

  html += `<b>‡≤í‡≤ü‡≥ç‡≤ü‡≥Å: ‚Çπ${total}</b>`;
  document.getElementById("bill").innerHTML = html;
}

/* =====================
   HELPERS
===================== */
function speak(text) {
  log("ü§ñ " + text);
  const u = new SpeechSynthesisUtterance(text);
  u.lang = "kn-IN";
  speechSynthesis.speak(u);
}

function log(t) {
  const d = document.getElementById("log");
  d.innerHTML += t + "<br>";
  d.scrollTop = d.scrollHeight;
}

function status(t) {
  document.getElementById("status").innerText = t;
}

function goBack() {
  history.back();
}
</script>

</body>
</html>
