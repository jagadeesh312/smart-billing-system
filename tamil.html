<!DOCTYPE html>
<html lang="ta">
<head>
<meta charset="UTF-8">
<title>ро╕рпНрооро╛ро░рпНроЯрпН рокро┐ро▓рпНро▓ро┐роЩрпН AI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

/* BACKGROUND */
body {
  font-family: Arial, sans-serif;
  min-height: 100vh;
  background:
    linear-gradient(rgba(0,0,0,0.45), rgba(0,0,0,0.45)),
    url("https://images.unsplash.com/photo-1557683316-973673baf926?w=1920&q=80");
  background-size: cover;
  background-position: center;
  background-attachment: fixed;

  display: flex;
  justify-content: center;
  align-items: center;
  color: #fff;
}

/* TOP BAR */
.btn-row {
  position: fixed;
  top: 12px;
  left: 12px;
  right: 12px;
  display: flex;
  gap: 10px;
  padding: 10px;
  background: rgba(255,255,255,0.15);
  backdrop-filter: blur(16px);
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.25);
  z-index: 1000;
}

.btn-row button {
  flex: 1;
  padding: 12px;
  font-size: 14px;
  color: white;
  cursor: pointer;
  background: rgba(255,255,255,0.18);
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 10px;
}

.btn-row button:first-child {
  background: rgba(71,85,105,0.45);
}

/* MAIN APP */
.app {
  width: 360px;
  padding: 20px;
  margin-top: 90px;
  background: rgba(255,255,255,0.12);
  backdrop-filter: blur(20px);
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,0.25);
  box-shadow: 0 25px 50px rgba(0,0,0,0.6);
}

h1 {
  text-align: center;
  font-size: 20px;
  margin-bottom: 6px;
}

.status {
  text-align: center;
  font-size: 14px;
  color: #7dd3fc;
  margin-bottom: 10px;
}

/* LOG & BILL */
.log, .bill {
  margin-top: 12px;
  padding: 12px;
  height: 120px;
  overflow-y: auto;
  background: rgba(255,255,255,0.1);
  backdrop-filter: blur(14px);
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.25);
  font-size: 14px;
}
</style>
</head>

<body>

<!-- TOP CONTROLS -->
<div class="btn-row">
  <button onclick="goBack()">тмЕ рокро┐ройрпНроЪрпЖро▓рпН</button>
  <button onclick="startListening()">ЁЯОд рокрпЗроЪрпБ</button>
</div>

<!-- MAIN APP -->
<div class="app">
  <h1>ЁЯз╛ ро╕рпНрооро╛ро░рпНроЯрпН рокро┐ро▓рпНро▓ро┐роЩрпН AI</h1>
  <div class="status" id="status">рокрпЗроЪ родрпКроЯрпБ</div>
  <div class="log" id="log"></div>
  <div class="bill" id="bill"></div>
</div>

<script>
/* =====================
   DATA
===================== */
const products = {
  "рокро╛ро▓рпН": 60,
  "роЕро░ро┐роЪро┐": 55,
  "роЪро░рпНроХрпНроХро░рпИ": 45,
  "ро░рпКроЯрпНроЯро┐": 40
};

const numberWords = {
  "роТро░рпБ":1, "роЗро░рогрпНроЯрпБ":2, "роорпВройрпНро▒рпБ":3, "роиро╛ройрпНроХрпБ":4, "роРроирпНродрпБ":5,
  "роЖро▒рпБ":6, "роПро┤рпБ":7, "роОроЯрпНроЯрпБ":8, "роТройрпНрокродрпБ":9, "рокродрпНродрпБ":10
};

let bill = {};

/* =====================
   SPEECH SETUP
===================== */
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
const recognition = new SpeechRecognition();
recognition.lang = "ta-IN";
recognition.interimResults = false;

function startListening() {
  status("роХрпЗроЯрпНроХро┐ро▒родрпБ...");
  recognition.start();
}

recognition.onresult = (e) => {
  const text = e.results[0][0].transcript;
  log("ЁЯСд " + text);
  handleCommand(text);
};

recognition.onend = () => status("рокрпЗроЪ родрпКроЯрпБ");

/* =====================
   COMMAND HANDLER
===================== */
function handleCommand(text) {

  if (text.includes("роирпА ропро╛ро░рпН")) {
    speak("роиро╛ройрпН ро╕рпНрооро╛ро░рпНроЯрпН рокро┐ро▓рпНро▓ро┐роЩрпН AI роЕроорпИрокрпНрокрпБ.");
    return;
  }

  if (text.includes("роЙройрпНройрпИ ропро╛ро░рпН роЙро░рпБро╡ро╛роХрпНроХро┐ройро╛ро░рпНроХро│рпН")) {
    speak("роОройрпНройрпИ SBAS роХрпБро┤рпБ рооро▒рпНро▒рпБроорпН роЬроХродрпАро╖рпН роЙро░рпБро╡ро╛роХрпНроХро┐ройро╛ро░рпНроХро│рпН.");
    return;
  }

  if (text.includes("родрпЗродро┐")) {
    const today = new Date().toLocaleDateString("ta-IN", {
      day: "numeric", month: "long", year: "numeric"
    });
    speak("роЗройрпНро▒рпИроп родрпЗродро┐ " + today);
    return;
  }

  if (text.includes("роХро┐ро│ро┐ропро░рпН") || text.includes("роЕройрпИродрпНродрпИропрпБроорпН роирпАроХрпНроХрпБ")) {
    bill = {};
    updateBill();
    speak("рокро┐ро▓рпН роирпАроХрпНроХрокрпНрокроЯрпНроЯродрпБ.");
    return;
  }

  if (text.includes("ро╡ро┐ро▓рпИ")) {
    for (let item in products) {
      if (text.includes(item)) {
        speak(item + " ро╡ро┐ро▓рпИ ро░рпВрокро╛ропрпН " + products[item]);
        return;
      }
    }
  }

  if (text.includes("роорпКродрпНрод")) {
    let total = 0;
    for (let item in bill) total += bill[item] * products[item];
    speak("роорпКродрпНрод родрпКроХрпИ ро░рпВрокро╛ропрпН " + total);
    return;
  }

  if (text.includes("роорпАрогрпНроЯрпБроорпН")) {
    if (Object.keys(bill).length === 0) {
      speak("рокро┐ро▓рпН роХро╛ро▓ро┐ропро╛роХ роЙро│рпНро│родрпБ.");
      return;
    }
    let summary = [];
    for (let item in bill) summary.push(bill[item] + " " + item);
    speak("роЙроЩрпНроХро│рпН рокро┐ро▓ро┐ро▓рпН " + summary.join(", "));
    return;
  }

  if (text.includes("роирпАроХрпНроХрпБ")) {
    let qty = 1;
    for (let n in numberWords) if (text.includes(n)) qty = numberWords[n];

    for (let item in bill) {
      if (text.includes(item)) {
        bill[item] -= qty;
        if (bill[item] <= 0) delete bill[item];
        updateBill();
        speak(qty + " " + item + " роирпАроХрпНроХрокрпНрокроЯрпНроЯродрпБ.");
        return;
      }
    }
  }

  const parts = text.split(" рооро▒рпНро▒рпБроорпН ");
  let added = [];

  parts.forEach(part => {
    let qty = 1;
    for (let n in numberWords) if (part.includes(n)) qty = numberWords[n];

    for (let item in products) {
      if (part.includes(item)) {
        bill[item] = (bill[item] || 0) + qty;
        added.push(qty + " " + item);
      }
    }
  });

  if (added.length) {
    updateBill();
    speak(added.join(" рооро▒рпНро▒рпБроорпН ") + " роЪрпЗро░рпНроХрпНроХрокрпНрокроЯрпНроЯродрпБ.");
    return;
  }

  speak("рооройрпНройро┐роХрпНроХро╡рпБроорпН, рокрпБро░ро┐ропро╡ро┐ро▓рпНро▓рпИ.");
}

/* =====================
   BILL UI
===================== */
function updateBill() {
  let html = "<b>рокро┐ро▓рпН</b><br>";
  let total = 0;

  for (let item in bill) {
    const cost = bill[item] * products[item];
    total += cost;
    html += `${item} x ${bill[item]} = тВ╣${cost}<br>`;
  }

  html += `<b>роорпКродрпНродроорпН: тВ╣${total}</b>`;
  document.getElementById("bill").innerHTML = html;
}

/* =====================
   HELPERS
===================== */
function speak(text) {
  log("ЁЯдЦ " + text);
  const u = new SpeechSynthesisUtterance(text);
  u.lang = "ta-IN";
  speechSynthesis.speak(u);
}

function log(t) {
  const d = document.getElementById("log");
  d.innerHTML += t + "<br>";
  d.scrollTop = d.scrollHeight;
}

function status(t) {
  document.getElementById("status").innerText = t;
}

function goBack() {
  history.back();
}
</script>

</body>
</html>
