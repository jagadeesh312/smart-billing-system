<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Billing System</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
 <link rel="stylesheet" href="style.css">
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body><!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div><!-- Login Page -->
  <div class="login-container" id="loginPage">
   <div class="login-box glass">
    <div class="login-logo">
     ðŸ›’
    </div>
    <h1 class="login-title" id="loginShopName">Smart Billing System</h1>
    <div class="role-selector"><button class="role-btn active" data-role="admin" onclick="selectRole('admin')"> <i class="fas fa-user-shield"></i> Admin </button> <button class="role-btn" data-role="employee" onclick="selectRole('employee')"> <i class="fas fa-user"></i> Employee </button>
    </div>
    <div class="input-group"><label for="username">Username</label> <input type="text" id="username" placeholder="Enter username">
    </div>
    <div class="input-group"><label for="password">Password</label> <input type="password" id="password" placeholder="Enter password">
    </div><button class="login-btn" onclick="handleLogin()"> <i class="fas fa-sign-in-alt"></i> Login </button>
    <div class="credentials-hint"><strong>Demo Credentials:</strong><br>
      Admin: admin / admin123<br>
      Employee: emp1 / emp123
    </div>
   </div>
  </div><!-- Admin Dashboard -->
  <div class="dashboard" id="adminDashboard">
   <header class="header glass">
    <div class="shop-name"><i class="fas fa-store"></i> <span id="adminShopName">Smart Billing System</span>
    </div>
    <div class="header-actions">
     <div class="user-info">
      <div class="user-avatar" id="adminAvatar">
       A
      </div><span id="adminUserName">Admin</span>
     </div><button class="header-btn" onclick="toggleFullscreen()"> <i class="fas fa-expand"></i> Fullscreen </button> <button class="header-btn danger" onclick="handleLogout()"> <i class="fas fa-sign-out-alt"></i> Logout </button>
    </div>
   </header>
   <nav class="nav-tabs"><button class="nav-tab active" data-tab="admin-overview" onclick="switchTab('admin-overview')"> <i class="fas fa-chart-line"></i> Overview </button> <button class="nav-tab" data-tab="admin-products" onclick="switchTab('admin-products')"> <i class="fas fa-box"></i> Products </button> <button class="nav-tab" data-tab="admin-sales" onclick="switchTab('admin-sales')"> <i class="fas fa-receipt"></i> Sales History </button> <button class="nav-tab" data-tab="admin-employees" onclick="switchTab('admin-employees')"> <i class="fas fa-users"></i> Employees </button> <button class="nav-tab" data-tab="admin-settings" onclick="switchTab('admin-settings')"> <i class="fas fa-cog"></i> Settings </button> <button class="nav-tab" data-tab="admin-billing" onclick="switchTab('admin-billing')"> <i class="fas fa-cash-register"></i> Billing </button>
   </nav>
   <main class="main-content"><!-- Overview Tab -->
    <div class="tab-content active" id="admin-overview">
     <div class="stats-grid">
      <div class="stat-card glass">
       <div class="stat-icon">
        <i class="fas fa-rupee-sign"></i>
       </div>
       <div class="stat-value" id="totalSales">
        â‚¹0
       </div>
       <div class="stat-label">
        Total Sales
       </div>
      </div>
      <div class="stat-card glass">
       <div class="stat-icon">
        <i class="fas fa-file-invoice"></i>
       </div>
       <div class="stat-value" id="totalBills">
        0
       </div>
       <div class="stat-label">
        Total Bills
       </div>
      </div>
      <div class="stat-card glass">
       <div class="stat-icon">
        <i class="fas fa-box"></i>
       </div>
       <div class="stat-value" id="totalProducts">
        0
       </div>
       <div class="stat-label">
        Products
       </div>
      </div>
      <div class="stat-card glass">
       <div class="stat-icon">
        <i class="fas fa-users"></i>
       </div>
       <div class="stat-value" id="totalEmployees">
        0
       </div>
       <div class="stat-label">
        Employees
       </div>
      </div>
     </div>
     <div class="glass" style="padding: 25px;">
      <h3 style="margin-bottom: 20px;"><i class="fas fa-chart-bar"></i> Recent Sales</h3>
      <div class="table-container">
       <table class="data-table" id="recentSalesTable">
        <thead>
         <tr>
          <th>Bill #</th>
          <th>Date</th>
          <th>Items</th>
          <th>Amount</th>
          <th>Status</th>
         </tr>
        </thead>
        <tbody></tbody>
       </table>
      </div>
     </div>
    </div><!-- Products Tab -->
    <div class="tab-content" id="admin-products">
     <div class="glass" style="padding: 25px; margin-bottom: 20px;">
      <h3 style="margin-bottom: 20px;"><i class="fas fa-plus-circle"></i> Add New Product</h3>
      <form id="productForm" onsubmit="handleProductSubmit(event)">
       <div class="form-grid">
        <div class="form-group"><label for="productName">Product Name</label> <input type="text" id="productName" required>
        </div>
        <div class="form-group"><label for="productPrice">Price (â‚¹)</label> <input type="number" id="productPrice" step="0.01" required>
        </div>
        <div class="form-group"><label for="productGst">GST (%)</label> <input type="number" id="productGst" value="18" required>
        </div>
        <div class="form-group"><label for="productCategory">Category</label> <select id="productCategory" required> <option value="Grocery">Grocery</option> <option value="Dairy">Dairy</option> <option value="Beverages">Beverages</option> <option value="Snacks">Snacks</option> <option value="Personal Care">Personal Care</option> <option value="Household">Household</option> </select>
        </div>
        <div class="form-group"><label for="productStock">Stock</label> <input type="number" id="productStock" value="100" required>
        </div>
        <div class="form-group"><label for="productIcon">Icon (Emoji)</label> <input type="text" id="productIcon" value="ðŸ“¦" required>
        </div>
       </div><input type="hidden" id="editProductId"> <button type="submit" class="submit-btn"> <i class="fas fa-save"></i> Save Product </button>
      </form>
     </div>
     <div class="glass table-container" style="padding: 25px;">
      <h3 style="margin-bottom: 20px;"><i class="fas fa-list"></i> Product List</h3>
      <table class="data-table" id="productsTable">
       <thead>
        <tr>
         <th>Icon</th>
         <th>Name</th>
         <th>Price</th>
         <th>GST</th>
         <th>Category</th>
         <th>Stock</th>
         <th>Actions</th>
        </tr>
       </thead>
       <tbody></tbody>
      </table>
     </div>
    </div><!-- Sales History Tab -->
    <div class="tab-content" id="admin-sales">
     <div class="glass table-container" style="padding: 25px;">
      <h3 style="margin-bottom: 20px;"><i class="fas fa-history"></i> All Sales</h3>
      <table class="data-table" id="allSalesTable">
       <thead>
        <tr>
         <th>Bill #</th>
         <th>Date</th>
         <th>Cashier</th>
         <th>Items</th>
         <th>Subtotal</th>
         <th>GST</th>
         <th>Discount</th>
         <th>Total</th>
         <th>Actions</th>
        </tr>
       </thead>
       <tbody></tbody>
      </table>
     </div>
    </div><!-- Employees Tab -->
    <div class="tab-content" id="admin-employees">
     <div class="glass" style="padding: 25px; margin-bottom: 20px;">
      <h3 style="margin-bottom: 20px;"><i class="fas fa-user-plus"></i> Add Employee</h3>
      <form id="employeeForm" onsubmit="handleEmployeeSubmit(event)">
       <div class="form-grid">
        <div class="form-group"><label for="empName">Name</label> <input type="text" id="empName" required>
        </div>
        <div class="form-group"><label for="empUsername">Username</label> <input type="text" id="empUsername" required>
        </div>
        <div class="form-group"><label for="empPassword">Password</label> <input type="password" id="empPassword" required>
        </div>
       </div><input type="hidden" id="editEmpId"> <button type="submit" class="submit-btn"> <i class="fas fa-save"></i> Save Employee </button>
      </form>
     </div>
     <div class="glass table-container" style="padding: 25px;">
      <h3 style="margin-bottom: 20px;"><i class="fas fa-users"></i> Employee List</h3>
      <table class="data-table" id="employeesTable">
       <thead>
        <tr>
         <th>ID</th>
         <th>Name</th>
         <th>Username</th>
         <th>Actions</th>
        </tr>
       </thead>
       <tbody></tbody>
      </table>
     </div>
    </div><!-- Settings Tab -->
    <div class="tab-content" id="admin-settings">
     <div class="settings-card glass">
      <h3 class="settings-title"><i class="fas fa-store"></i> Shop Settings</h3>
      <form onsubmit="saveSettings(event)">
       <div class="form-grid">
        <div class="form-group"><label for="settingsShopName">Shop Name</label> <input type="text" id="settingsShopName" required>
        </div>
        <div class="form-group"><label for="settingsUpiId">UPI ID</label> <input type="text" id="settingsUpiId" placeholder="yourname@upi" required>
        </div>
       </div><button type="submit" class="submit-btn"> <i class="fas fa-save"></i> Save Settings </button>
      </form>
     </div>
     <div class="settings-card glass">
      <h3 class="settings-title"><i class="fas fa-keyboard"></i> Keyboard Shortcuts</h3>
      <div class="shortcuts-grid">
       <div class="shortcut-item"><span class="shortcut-key">F11</span> <span>Fullscreen Mode</span>
       </div>
       <div class="shortcut-item"><span class="shortcut-key">Ctrl+M</span> <span>Voice Command</span>
       </div>
       <div class="shortcut-item"><span class="shortcut-key">Ctrl+P</span> <span>Generate Payment</span>
       </div>
       <div class="shortcut-item"><span class="shortcut-key">Esc</span> <span>Clear/Close</span>
       </div>
      </div>
     </div>
    </div><!-- Admin Billing Tab -->
    <div class="tab-content" id="admin-billing"><!-- Same POS layout as employee -->
     <div class="pos-layout">
      <div class="products-section glass">
       <div class="search-bar"><input type="text" class="search-input" id="adminSearchInput" placeholder="Search products..." oninput="filterProducts('admin')"> <button class="voice-btn" id="adminVoiceBtn" onclick="startVoiceRecognition('admin')"> <i class="fas fa-microphone"></i> Voice </button>
       </div>
       <div class="voice-display" id="adminVoiceDisplay">
        <div class="voice-text" id="adminVoiceText"></div>
        <div class="voice-status" id="adminVoiceStatus">
         Listening...
        </div>
       </div>
       <div class="category-filter" id="adminCategoryFilter"></div>
       <div class="products-grid" id="adminProductsGrid"></div>
      </div>
      <div class="cart-section glass-dark">
       <div class="cart-header">
        <h3 class="cart-title"><i class="fas fa-shopping-cart"></i> Current Bill</h3><button class="clear-btn" onclick="clearCart('admin')"> <i class="fas fa-trash"></i> Clear </button>
       </div>
       <div class="cart-items" id="adminCartItems">
        <div class="cart-empty"><i class="fas fa-shopping-basket"></i>
         <p>Cart is empty</p>
         <p>Add products to start billing</p>
        </div>
       </div>
       <div class="cart-summary">
        <div class="summary-row"><span>Subtotal</span> <span id="adminSubtotal">â‚¹0.00</span>
        </div>
        <div class="summary-row"><span>GST</span> <span id="adminGst">â‚¹0.00</span>
        </div>
        <div class="discount-section"><input type="number" class="discount-input" id="adminDiscountValue" placeholder="Discount" value="0"> <select class="discount-type" id="adminDiscountType"> <option value="percent">%</option> <option value="amount">â‚¹</option> </select>
        </div>
        <div class="summary-row"><span>Discount</span> <span id="adminDiscount">-â‚¹0.00</span>
        </div>
        <div class="summary-row total"><span>Grand Total</span> <span id="adminTotal">â‚¹0.00</span>
        </div><button class="checkout-btn" id="adminCheckoutBtn" onclick="generatePayment('admin')" disabled> <i class="fas fa-qrcode"></i> Generate Payment QR </button>
       </div>
      </div>
     </div>
    </div>
   </main>
  </div><!-- Employee Dashboard -->
  <div class="dashboard" id="employeeDashboard">
   <header class="header glass">
    <div class="shop-name"><i class="fas fa-store"></i> <span id="empShopName">Smart Billing System</span>
    </div>
    <div class="header-actions">
     <div class="user-info">
      <div class="user-avatar" id="empAvatar">
       E
      </div><span id="empUserName">Employee</span>
     </div><button class="header-btn" onclick="toggleFullscreen()"> <i class="fas fa-expand"></i> Fullscreen </button> <button class="header-btn danger" onclick="handleLogout()"> <i class="fas fa-sign-out-alt"></i> Logout </button>
    </div>
   </header>
   <main class="main-content" style="margin-top: 20px;">
    <div class="pos-layout">
     <div class="products-section glass">
      <div class="search-bar"><input type="text" class="search-input" id="empSearchInput" placeholder="Search products..." oninput="filterProducts('emp')"> <button class="voice-btn" id="empVoiceBtn" onclick="startVoiceRecognition('emp')"> <i class="fas fa-microphone"></i> Voice </button>
      </div>
      <div class="voice-display" id="empVoiceDisplay">
       <div class="voice-text" id="empVoiceText"></div>
       <div class="voice-status" id="empVoiceStatus">
        Listening...
       </div>
      </div>
      <div class="category-filter" id="empCategoryFilter"></div>
      <div class="products-grid" id="empProductsGrid"></div>
     </div>
     <div class="cart-section glass-dark">
      <div class="cart-header">
       <h3 class="cart-title"><i class="fas fa-shopping-cart"></i> Current Bill</h3><button class="clear-btn" onclick="clearCart('emp')"> <i class="fas fa-trash"></i> Clear </button>
      </div>
      <div class="cart-items" id="empCartItems">
       <div class="cart-empty"><i class="fas fa-shopping-basket"></i>
        <p>Cart is empty</p>
        <p>Add products to start billing</p>
       </div>
      </div>
      <div class="cart-summary">
       <div class="summary-row"><span>Subtotal</span> <span id="empSubtotal">â‚¹0.00</span>
       </div>
       <div class="summary-row"><span>GST</span> <span id="empGst">â‚¹0.00</span>
       </div>
       <div class="discount-section"><input type="number" class="discount-input" id="empDiscountValue" placeholder="Discount" value="0"> <select class="discount-type" id="empDiscountType"> <option value="percent">%</option> <option value="amount">â‚¹</option> </select>
       </div>
       <div class="summary-row"><span>Discount</span> <span id="empDiscount">-â‚¹0.00</span>
       </div>
       <div class="summary-row total"><span>Grand Total</span> <span id="empTotal">â‚¹0.00</span>
       </div><button class="checkout-btn" id="empCheckoutBtn" onclick="generatePayment('emp')" disabled> <i class="fas fa-qrcode"></i> Generate Payment QR </button>
      </div>
     </div>
    </div>
   </main>
  </div><!-- Payment Modal -->
  <div class="modal-overlay" id="paymentModal">
   <div class="modal glass">
    <div class="modal-header">
     <h3 class="modal-title"><i class="fas fa-qrcode"></i> Payment</h3><button class="modal-close" onclick="closeModal('paymentModal')">Ã—</button>
    </div>
    <div class="payment-amount" id="paymentAmount">
     â‚¹0.00
    </div>
    <div class="qr-container">
     <div class="qr-code" id="qrCode"></div>
     <div class="upi-id" id="paymentUpiId">
      UPI ID: 890xxxx@ybl
     </div>
    </div><button class="confirm-payment-btn" onclick="confirmPayment()"> <i class="fas fa-check"></i> Confirm Payment Received </button>
   </div>
  </div><!-- Invoice Modal -->
  <div class="modal-overlay" id="invoiceModal">
   <div class="modal glass" style="max-width: 400px;">
    <div class="modal-header">
     <h3 class="modal-title"><i class="fas fa-receipt"></i> Invoice</h3><button class="modal-close" onclick="closeModal('invoiceModal')">Ã—</button>
    </div>
    <div class="invoice-container" id="invoiceContent"><!-- Invoice content will be generated here -->
    </div>
    <div class="invoice-actions"><button class="invoice-btn print" onclick="printInvoice()"> <i class="fas fa-print"></i> Print </button> <button class="invoice-btn download" onclick="downloadInvoice()"> <i class="fas fa-download"></i> Download </button>
    </div>
   </div>
  </div><!-- View Invoice Modal -->
  <div class="modal-overlay" id="viewInvoiceModal">
   <div class="modal glass" style="max-width: 400px;">
    <div class="modal-header">
     <h3 class="modal-title"><i class="fas fa-receipt"></i> View Invoice</h3><button class="modal-close" onclick="closeModal('viewInvoiceModal')">Ã—</button>
    </div>
    <div class="invoice-container" id="viewInvoiceContent"><!-- Invoice content will be generated here -->
    </div>
    <div class="invoice-actions"><button class="invoice-btn print" onclick="printViewInvoice()"> <i class="fas fa-print"></i> Print </button>
    </div>
   </div>
  </div>
  <script src="scripts/script.js"></script>
</html>

