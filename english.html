<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Smart Billing AI System</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

/* BACKGROUND */
body {
  font-family: Arial, sans-serif;
  min-height: 100vh;
  background:
    linear-gradient(rgba(0,0,0,0.45), rgba(0,0,0,0.45)),
    url("https://images.unsplash.com/photo-1557683316-973673baf926?w=1920&q=80");
  background-size: cover;
  background-position: center;
  background-attachment: fixed;

  display: flex;
  justify-content: center;
  align-items: center;
  color: #fff;
}

/* TOP BAR */
.btn-row {
  position: fixed;
  top: 12px;
  left: 12px;
  right: 12px;
  display: flex;
  gap: 10px;
  padding: 10px;
  background: rgba(255,255,255,0.15);
  backdrop-filter: blur(16px);
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.25);
  z-index: 1000;
}

.btn-row button {
  flex: 1;
  padding: 12px;
  font-size: 14px;
  color: white;
  cursor: pointer;
  background: rgba(255,255,255,0.18);
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 10px;
}

.btn-row button:first-child {
  background: rgba(71,85,105,0.45);
}

/* MAIN APP */
.app {
  width: 360px;
  padding: 20px;
  margin-top: 90px;
  background: rgba(255,255,255,0.12);
  backdrop-filter: blur(20px);
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,0.25);
  box-shadow: 0 25px 50px rgba(0,0,0,0.6);
}

h1 {
  text-align: center;
  font-size: 20px;
  margin-bottom: 6px;
}

.status {
  text-align: center;
  font-size: 14px;
  color: #7dd3fc;
  margin-bottom: 10px;
}

/* LOG & BILL */
.log, .bill {
  margin-top: 12px;
  padding: 12px;
  height: 120px;
  overflow-y: auto;
  background: rgba(255,255,255,0.1);
  backdrop-filter: blur(14px);
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.25);
  font-size: 14px;
}
</style>
</head>

<body>

<!-- TOP CONTROLS -->
<div class="btn-row">
  <button onclick="goBack()">â¬… Back</button>
  <button onclick="startListening()">ðŸŽ¤ Speak</button>
</div>

<!-- MAIN APP -->
<div class="app">
  <h1>ðŸ§¾ Smart Billing AI</h1>
  <div class="status" id="status">Tap and speak</div>
  <div class="log" id="log"></div>
  <div class="bill" id="bill"></div>
</div>

<script>
/* =====================
   DATA
===================== */
const products = {
  milk: 60,
  rice: 55,
  sugar: 45,
  bread: 40
};

const numberWords = {
  one:1, two:2, three:3, four:4, five:5,
  six:6, seven:7, eight:8, nine:9, ten:10
};

let bill = {};

/* =====================
   SPEECH SETUP
===================== */
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
const recognition = new SpeechRecognition();
recognition.lang = "en-IN";
recognition.interimResults = false;

function startListening() {
  status("Listening...");
  recognition.start();
}

recognition.onresult = (e) => {
  const text = e.results[0][0].transcript.toLowerCase();
  log("ðŸ‘¤ " + text);
  handleCommand(text);
};

recognition.onend = () => status("Tap and speak");

/* =====================
   COMMAND HANDLER
===================== */
function handleCommand(text) {

  // WHO ARE YOU
  if (text.includes("who are you")) {
    speak("I am Smart Billing AI System.");
    return;
  }

  // WHO CREATED YOU
  if (text.includes("who created you")) {
    speak("I was created by SBAS Team and Jagadeesh.");
    return;
  }

  // DATE
  if (text.includes("date")) {
    const today = new Date().toLocaleDateString("en-IN", {
      day: "numeric",
      month: "long",
      year: "numeric"
    });
    speak("Today is " + today);
    return;
  }

  // CLEAR / REMOVE ALL
  if (
    text.includes("clear") ||
    text.includes("remove all") ||
    text.includes("clear bill") ||
    text.includes("remove everything")
  ) {
    bill = {};
    updateBill();
    speak("Bill cleared.");
    return;
  }

  // PRICE QUERY
  if (text.includes("price")) {
    for (let item in products) {
      if (text.includes(item)) {
        speak("The price of " + item + " is rupees " + products[item]);
        return;
      }
    }
  }

  // TOTAL AMOUNT
  if (text.includes("total")) {
    let total = 0;
    for (let item in bill) total += bill[item] * products[item];
    speak("Total amount is rupees " + total);
    return;
  }

  // REPEAT BILL
  if (text.includes("repeat")) {
    if (Object.keys(bill).length === 0) {
      speak("The bill is empty.");
      return;
    }
    let summary = [];
    for (let item in bill) summary.push(bill[item] + " " + item);
    speak("Your bill has " + summary.join(", "));
    return;
  }

  // REMOVE SINGLE ITEM
  if (text.includes("remove")) {
    let qty = 1;
    for (let n in numberWords) if (text.includes(n)) qty = numberWords[n];

    for (let item in bill) {
      if (text.includes(item)) {
        bill[item] -= qty;
        if (bill[item] <= 0) delete bill[item];
        updateBill();
        speak(qty + " " + item + " removed.");
        return;
      }
    }
  }

  // ADD MULTIPLE ITEMS
  const parts = text.split(" and ");
  let added = [];

  parts.forEach(part => {
    let qty = 1;
    for (let n in numberWords) if (part.includes(n)) qty = numberWords[n];

    for (let item in products) {
      if (part.includes(item)) {
        bill[item] = (bill[item] || 0) + qty;
        added.push(qty + " " + item);
      }
    }
  });

  if (added.length) {
    updateBill();
    speak(added.join(" and ") + " added.");
    return;
  }

  speak("Sorry, I did not understand.");
}

/* =====================
   BILL UI
===================== */
function updateBill() {
  let html = "<b>Bill</b><br>";
  let total = 0;

  for (let item in bill) {
    const cost = bill[item] * products[item];
    total += cost;
    html += `${item} x ${bill[item]} = â‚¹${cost}<br>`;
  }

  html += `<b>Total: â‚¹${total}</b>`;
  document.getElementById("bill").innerHTML = html;
}

/* =====================
   HELPERS
===================== */
function speak(text) {
  log("ðŸ¤– " + text);
  const u = new SpeechSynthesisUtterance(text);
  u.lang = "en-IN";
  speechSynthesis.speak(u);
}

function log(t) {
  const d = document.getElementById("log");
  d.innerHTML += t + "<br>";
  d.scrollTop = d.scrollHeight;
}

function status(t) {
  document.getElementById("status").innerText = t;
}

function goBack() {
  history.back();
}
</script>

</body>
</html>
